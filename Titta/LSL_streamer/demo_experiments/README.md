This folder contains an example of using the TittaLSL extension to Titta for building an experiment where data from an eye tracker is streamed in real-time accross a local network. run it by running `readme_master.m` on a computer and running `readme.m` on at least two computers. We will call these latter computers, that are running `readme.m`, the clients. Client computers should have an eye tracker [supported by Titta](https://github.com/dcnieho/titta?tab=readme-ov-file#usage) connected. 

What happens in the scripts is that the clients connect to the master. From the master, the command can be given by the operator to start running the experiments, once they see enough clients have connected. A calibration screen will then appear on the clients. After calibration, the clients report back the accuracy of their calibrations as assessed through validation. The master then tells each client which other clients to connect to. Each client starts a TittaLSL stream to make their gaze data available over the network and then connects to the gaze streams of the other clients that they were told to connect to. Once this is all done, each client informs the master that they are ready to start the experiment. Once the all clear has been received from all clients, the operator at the master computer can start the task on all clients by pressing a key on the keyboard.

The participants at the client computers then perform a search task (find Wally) and are asked to press the spacebar once they have found Wally. If Wally is found (or the maximum search time of 20s is exceeded), the clients report the task result back to the master and exit. The master reports on the search time of each client and also exits.

Note that a Python version of this script using the Python version of Titta and the TittaLSL extension [is also available in the form of `read_me_LSL.py` and `read_me_LSL_master.py`](https://github.com/marcus-nystrom/Titta/tree/master/playground). These Python versions are interoperable with the MATLAB version. You can freely mix Python and MATLAB clients and masters.

## Matlab LSL installation instructions
For the matlab version of this demo to run, you need to have [liblsl-Matlab](https://github.com/labstreaminglayer/liblsl-Matlab) correctly installed. For this, please refer to the installation instructions [here](https://github.com/labstreaminglayer/liblsl-Matlab?tab=readme-ov-file#from-source). A copy of the liblsl-Matlab repository should already be present in the `liblsl_Matlab` subdirectory, if not, please download it and put it there. For me then, the installation was not simple. It required running the master script once, which through its calls to the LSL library caused some essential dlls and programming libraries to get downloaded. After that, the library still had to be compiled. This required, as per their installation instructions, building the mex files. For this a compiler was necessary on the system. If building the mex files fails because of a missing compiler, please install Microsoft Visual Studio Community Edition (free) if on Windows, choosing the C++ workload. On Linux, the GCC compiler should probably do the trick and can be installed using the OS's package manager.